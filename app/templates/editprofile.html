{% extends "base.html" %}

{% block head %}
<link rel="stylesheet" type="text/css" charset="UTF-8" href="{{ url_for('static',filename='styles/profile.css') }}">
<script>
    window.onload = function() {
        displaycharcount()
    }
</script>
{% endblock %}
{% block content %}
<div class="formcontainer">
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            <div style="padding: .25em; margin-bottom: 1em; border-style: none none none solid; border-width: medium; border-color: red; background-color: rgba(255, 0, 0, 0.2);">
                {{ messages[0] }}
            </div>
        {% endif %}
        {% endwith %}
    <div class="mediumcropper"><img class="profilepic" src="{{ picurl }}"></div>
    <form method="post" enctype="multipart/form-data">
        <label for="file">New picture<span style="color: red;">*</span></label><br>
        <input type="file" id="file" name="file" required><br>
        <p style="font-size: 0.85em;"><span style="color: red;">*</span>Required fields</p>
        <input type="submit" value="Upload">
    </form>
    <form method="post" id="aboutform">
        <p>About:</p>
        <textarea name="about" id="about" form="aboutform" rows="10" maxlength="499" onkeydown="displaycharcount()">{{ about }}</textarea><br>
        <div id="the-count">
            <span id="current">0</span>
            <span id="maximum">/ 500</span>
        </div><br>
        <input type="submit" value="Change">
    </form>
    <br>
        <a class="btn btn-github" style="width: fit-content;" href="/2FA/setup">
            <svg class="svg-icon" width="18" height="18" viewBox="0 0 485.017 485.017">
                <path d="M361.205,68.899c-14.663,0-28.447,5.71-38.816,16.078c-21.402,21.403-21.402,56.228,0,77.631
                    c10.368,10.368,24.153,16.078,38.815,16.078s28.447-5.71,38.816-16.078c21.402-21.403,21.402-56.228,0-77.631
                    C389.652,74.609,375.867,68.899,361.205,68.899z M378.807,141.394c-4.702,4.702-10.953,7.292-17.603,7.292
                    s-12.901-2.59-17.603-7.291c-9.706-9.706-9.706-25.499,0-35.205c4.702-4.702,10.953-7.291,17.603-7.291s12.9,2.589,17.603,7.291
                    C388.513,115.896,388.513,131.688,378.807,141.394z" fill="#ffffff">
                </path>
                <path d="M441.961,43.036C414.21,15.284,377.311,0,338.064,0c-39.248,0-76.146,15.284-103.897,43.036
                    c-42.226,42.226-54.491,105.179-32.065,159.698L0.254,404.584l-0.165,80.268l144.562,0.165v-55.722h55.705l0-55.705h55.705v-64.492
                    l26.212-26.212c17.615,7.203,36.698,10.976,55.799,10.976c39.244,0,76.14-15.282,103.889-43.032
                    C499.25,193.541,499.25,100.325,441.961,43.036z M420.748,229.617c-22.083,22.083-51.445,34.245-82.676,34.245
                    c-18.133,0-36.237-4.265-52.353-12.333l-9.672-4.842l-49.986,49.985v46.918h-55.705l0,55.705h-55.705v55.688l-84.5-0.096
                    l0.078-37.85L238.311,208.95l-4.842-9.672c-22.572-45.087-13.767-99.351,21.911-135.029C277.466,42.163,306.83,30,338.064,30
                    c31.234,0,60.598,12.163,82.684,34.249C466.34,109.841,466.34,184.025,420.748,229.617z" fill="#ffffff">
                </path>
            </svg>
            Enable 2FA</a>
    {% if not current_user.github_user_id %}
    <br>
        <a class="btn btn-github" style="width: fit-content;" href="/github/login">
            <svg aria-hidden="true" class="svg-icon svg-github" width="18" height="18" viewBox="0 0 18 18">
                <path d="M9 1a8 8 0 0 0-2.53 15.59c.4.07.55-.17.55-.38l-.01-1.49c-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82a7.42 7.42 0 0 1 4 0c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48l-.01 2.2c0 .21.15.46.55.38A8.01 8.01 0 0 0 9 1Z" fill="#ffffff"></path>
            </svg> Link GitHub account</a>
    {% else %}
    <br>
        <a class="btn btn-github" style="width: fit-content;" href="/github/unlink">
            <svg aria-hidden="true" class="svg-icon svg-github" width="18" height="18" viewBox="0 0 18 18">
                <path d="M9 1a8 8 0 0 0-2.53 15.59c.4.07.55-.17.55-.38l-.01-1.49c-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82a7.42 7.42 0 0 1 4 0c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48l-.01 2.2c0 .21.15.46.55.38A8.01 8.01 0 0 0 9 1Z" fill="#ffffff"></path>
            </svg> Unlink GitHub account</a>
    {% endif %}
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            <div style="padding: .25em; margin-bottom: 1em; border-style: none none none solid; border-width: medium; border-color: red; background-color: rgba(255, 0, 0, 0.2);">
                {{ messages[0] }}
            </div>
        {% endif %}
        {% endwith %}
</div>

{% endblock %}
